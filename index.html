<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYNERGIA v3.0</title>
    
    <!-- CSP pour Google OAuth -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://www.gstatic.com https://apis.google.com https://www.googletagmanager.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
        font-src 'self' https://fonts.gstatic.com;
        connect-src 'self' https://*.googleapis.com https://*.google.com https://*.firebaseapp.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://firebase.googleapis.com https://content.googleapis.com https://firebaseinstallations.googleapis.com https://firebaseremoteconfig.googleapis.com https://firebaselogging-pa.googleapis.com https://region1.google-analytics.com wss://*.firebaseio.com wss://*.firebaseapp.com;
        frame-src 'self' https://accounts.google.com https://*.firebaseapp.com;
        img-src 'self' data: https:;
    ">
    
    <!-- PWA -->
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23e94560'/%3E%3Ctext x='50' y='60' font-family='Arial' font-size='40' fill='white' text-anchor='middle'%3ES%3C/text%3E%3C/svg%3E">
    <meta name="theme-color" content="#1a1a2e">
    
    <!-- CSS Modulaire -->
    <link rel="stylesheet" href="./src/styles/variables.css">
    <link rel="stylesheet" href="./src/styles/base.css">
    <link rel="stylesheet" href="./src/styles/components.css">
    <link rel="stylesheet" href="./src/styles/modules/team.css">
    
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <div id="app">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p>Chargement de SYNERGIA v3.0...</p>
        </div>
    </div>

    <!-- Modal pour l'équipe -->
    <div id="teamModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Ajouter un membre</h2>
                <button class="close" onclick="closeTeamModal()">&times;</button>
            </div>
            <form id="teamForm">
                <div class="form-group">
                    <label class="form-label">Email *</label>
                    <input type="email" id="memberEmail" class="form-control" placeholder="exemple@entreprise.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Nom complet</label>
                    <input type="text" id="memberName" class="form-control" placeholder="Prénom Nom">
                </div>
                <div class="form-group">
                    <label class="form-label">Rôle</label>
                    <select id="memberRole" class="form-control">
                        <option value="employee">Employé</option>
                        <option value="manager">Manager</option>
                        <option value="admin">Administrateur</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Département</label>
                    <input type="text" id="memberDepartment" class="form-control" placeholder="IT, RH, Commercial...">
                </div>
                <div class="form-group">
                    <label class="form-label">Poste</label>
                    <input type="text" id="memberPosition" class="form-control" placeholder="Développeur, Manager...">
                </div>
                <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 30px;">
                    <button type="button" onclick="closeTeamModal()" class="btn btn-secondary">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Configuration -->
    <script src="./src/js/config.js"></script>
    
    <!-- Core modules -->
    <script src="./src/js/core/firebase.js"></script>
    <script src="./src/js/core/router.js"></script>
    <script src="./src/js/core/utils.js"></script>
    
    <!-- Managers -->
    <script src="./src/js/managers/AuthManager.js"></script>
    <script src="./src/js/managers/TeamManager.js"></script>
    <!-- <script src="./src/js/managers/BadgingManager.js"></script> -->
    <!-- <script src="./src/js/managers/ChatManager.js"></script> -->
    
    <!-- Components -->
    <script src="./src/js/components/Navigation.js"></script>
    <script src="./src/js/components/Modal.js"></script>
    <script src="./src/js/components/Toast.js"></script>
    
    <!-- Views -->
    <script src="./src/js/views/Dashboard.js"></script>
    <script src="./src/js/views/Team.js"></script>
    <script src="./src/js/views/Profile.js"></script>
    
    <!-- App initialization -->
    <script src="./src/js/app.js"></script>
    <script src="./src/js/main.js"></script>
</body>
</html>
